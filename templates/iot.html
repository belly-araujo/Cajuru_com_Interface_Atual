{% extends "base.html" %}
{% block content %}
<div class="container py-5">

  <!-- Cabeçalho -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary mb-0">
      <i class="bi bi-hdd-network me-2"></i> Dispositivos IoT
    </h2>
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-primary btn-sm shadow-sm">
      <i class="bi bi-arrow-left-circle me-1"></i> Voltar
    </a>
  </div>

  <!-- Card Principal -->
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-body p-4">

      <!-- Tabela -->
      <div class="table-responsive">
        <table class="table table-hover align-middle text-center mb-0">
          <thead class="table-light border-bottom border-primary-subtle">
            <tr>
              <th style="width: 5%;">#</th>
              <th style="width: 20%;">Nome</th>
              <th style="width: 25%;">Tópico</th>
              <th style="width: 15%;">Status</th>
              <th style="width: 25%;">Última comunicação</th>
            </tr>
          </thead>
          <tbody>
            {% for d in dispositivos %}
            <tr class="table-row">
              <td class="fw-semibold text-muted">{{ d.id }}</td>
              <td class="fw-medium">{{ d.nome }}</td>
              <td><code class="text-secondary bg-light px-2 py-1 rounded-3">{{ d.topico }}</code></td>
              <td>
                {% if d.online %}
                  <span class="badge rounded-pill bg-success px-3 py-2 shadow-sm">
                    <i class="bi bi-check-circle me-1"></i> Online
                  </span>
                {% else %}
                  <span class="badge rounded-pill bg-secondary px-3 py-2 shadow-sm">
                    <i class="bi bi-dash-circle me-1"></i> Offline
                  </span>
                {% endif %}
              </td>
              <td class="text-muted small">{{ d.ultima_comunicacao or "—" }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>

</div>

<!-- Estilo adicional -->
<style>
  .table-row:hover {
    background-color: #f8f9fa;
    transition: 0.2s ease-in-out;
  }

  .card {
    background: #ffffff;
  }

  code {
    font-size: 0.9rem;
  }

  .badge {
    font-size: 0.85rem;
    letter-spacing: 0.3px;
  }

  @media (max-width: 768px) {
    h2 {
      font-size: 1.25rem;
    }
    .btn {
      font-size: 0.8rem;
      padding: 0.35rem 0.75rem;
    }
  }
</style>
{% endblock %}
